# à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² LINE Notification à¸ªà¸³à¸«à¸£à¸±à¸šà¸£à¸°à¸šà¸šà¸‚à¸­à¹€à¸­à¸à¸ªà¸²à¸£

## ðŸ“‹ à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²

### 1. à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ dependencies

```bash
npm install @line/bot-sdk
```

### 2. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² LINE Bot à¹ƒà¸™ LINE Developers Console

1. à¹„à¸›à¸—à¸µà¹ˆ [LINE Developers Console](https://developers.line.biz/)
2. à¸ªà¸£à¹‰à¸²à¸‡ Provider à¹à¸¥à¸° Channel à¹ƒà¸«à¸¡à¹ˆ (Messaging API)
3. à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¹ˆà¸­à¹„à¸›à¸™à¸µà¹‰:
   - Channel ID
   - Channel Secret
   - Channel Access Token

### 3. à¸­à¸±à¸›à¹€à¸”à¸•à¹„à¸Ÿà¸¥à¹Œ .env

```env
# LINE Bot Configuration
LINE_CHANNEL_ACCESS_TOKEN=your_channel_access_token_here
LINE_CHANNEL_SECRET=your_channel_secret_here
LINE_CHANNEL_ID=your_channel_id_here

# à¹€à¸¥à¸·à¸­à¸à¸§à¸´à¸˜à¸µà¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ (à¹€à¸¥à¸·à¸­à¸à¸­à¸¢à¹ˆà¸²à¸‡à¹ƒà¸”à¸­à¸¢à¹ˆà¸²à¸‡à¸«à¸™à¸¶à¹ˆà¸‡)
# à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 1: à¸ªà¹ˆà¸‡à¹€à¸‚à¹‰à¸² LINE Group (à¹à¸™à¸°à¸™à¸³)
LINE_GROUP_ID=your_line_group_id_here

# à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 2: à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰ Admin à¸„à¸™à¹€à¸”à¸µà¸¢à¸§
# LINE_ADMIN_USER_ID=your_admin_line_user_id_here

# à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 3: à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¸«à¸¥à¸²à¸¢à¸„à¸™ (à¸„à¸±à¹ˆà¸™à¸”à¹‰à¸§à¸¢ comma)
# LINE_NOTIFY_USERS=user_id_1,user_id_2,user_id_3
```

### 4. à¸«à¸² LINE Group ID

#### à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 1: à¹ƒà¸Šà¹‰ Group ID Finder (à¹à¸™à¸°à¸™à¸³)

```bash
# à¸£à¸±à¸™à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸«à¸² Group ID
node utils/findGroupId.js
```

à¸ˆà¸²à¸à¸™à¸±à¹‰à¸™:
1. à¹„à¸›à¸—à¸µà¹ˆ http://localhost:3201
2. à¸—à¸³à¸•à¸²à¸¡à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¹ƒà¸™à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š
3. à¹€à¸žà¸´à¹ˆà¸¡ Bot à¹€à¸‚à¹‰à¸² Group à¹à¸¥à¸°à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡
4. Copy Group ID à¸ˆà¸²à¸ console

#### à¸§à¸´à¸˜à¸µà¸—à¸µà¹ˆ 2: à¹ƒà¸Šà¹‰ Webhook à¹à¸šà¸š manual

1. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Webhook URL à¹ƒà¸™ LINE Developers Console: `https://your-domain.com/webhook/find-group`
2. à¹€à¸›à¸´à¸” "Use webhook" à¹à¸¥à¸°à¸›à¸´à¸” "Auto-reply messages"
3. à¹€à¸žà¸´à¹ˆà¸¡ LINE Bot à¹€à¸‚à¹‰à¸² Group
4. à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸™ Group
5. à¸”à¸¹ server logs à¹€à¸žà¸·à¹ˆà¸­à¸«à¸² Group ID

### 5. à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š

```bash
# à¸—à¸”à¸ªà¸­à¸šà¸à¸²à¸£à¸ªà¹ˆà¸‡ LINE notification
curl http://localhost:3200/api/test-line

# à¸”à¸¹à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
curl http://localhost:3200/api/line-config
```

## ðŸš€ à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¸ªà¹ˆà¸‡à¸„à¸³à¸‚à¸­à¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸«à¸¡à¹ˆ à¸£à¸°à¸šà¸šà¸ˆà¸°à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹„à¸›à¸¢à¸±à¸‡ LINE Group à¹‚à¸”à¸¢à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´

### à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸µà¹ˆà¸ˆà¸°à¹„à¸”à¹‰à¸£à¸±à¸š:

```
ðŸ”” à¸„à¸³à¸‚à¸­à¹€à¸­à¸à¸ªà¸²à¸£à¹ƒà¸«à¸¡à¹ˆ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ“„ à¸£à¸«à¸±à¸ªà¸„à¸³à¸‚à¸­: #12345
ðŸ‘¤ à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²: à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ
ðŸŽ“ à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²: 6401234567
ðŸ“‹ à¸›à¸£à¸°à¹€à¸ à¸—à¹€à¸­à¸à¸ªà¸²à¸£: à¹ƒà¸šà¹à¸ªà¸”à¸‡à¸œà¸¥à¸à¸²à¸£à¸¨à¸¶à¸à¸©à¸²
ðŸ“¦ à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸£à¸±à¸š: à¸£à¸±à¸šà¸”à¹‰à¸§à¸¢à¸•à¸™à¹€à¸­à¸‡
ðŸ’° à¸¢à¸­à¸”à¸£à¸§à¸¡: 100.00 à¸šà¸²à¸—
â° à¹€à¸§à¸¥à¸²: 23 à¸ž.à¸„. 2025 14:30
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ðŸ”— à¸à¸£à¸¸à¸“à¸²à¹€à¸‚à¹‰à¸²à¸£à¸°à¸šà¸šà¹€à¸žà¸·à¹ˆà¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£
```

## ðŸ”§ à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚à¸›à¸±à¸à¸«à¸²

### à¸›à¸±à¸à¸«à¸²à¸—à¸µà¹ˆà¸žà¸šà¸šà¹ˆà¸­à¸¢:

1. **à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¹„à¸”à¹‰**
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Channel Access Token
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Group ID à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² Bot à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™ Group à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ

2. **à¸«à¸² Group ID à¹„à¸¡à¹ˆà¹„à¸”à¹‰**
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Webhook URL à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¹€à¸›à¸´à¸” "Use webhook" à¹à¸¥à¹‰à¸§
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸›à¸´à¸” "Auto-reply messages" à¹à¸¥à¹‰à¸§

3. **Webhook à¹„à¸¡à¹ˆà¸—à¸³à¸‡à¸²à¸™**
   - à¹ƒà¸Šà¹‰ ngrok à¸«à¸£à¸·à¸­ cloudflare tunnel à¸ªà¸³à¸«à¸£à¸±à¸š testing local
   - à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š SSL certificate à¸ªà¸³à¸«à¸£à¸±à¸š production

### à¸à¸²à¸£ Debug:

```bash
# à¸”à¸¹ logs à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š
tail -f logs/app.log

# à¸—à¸”à¸ªà¸­à¸š LINE API à¸”à¹‰à¸§à¸¢ curl
curl -X POST https://api.line.me/v2/bot/message/push \
  -H 'Content-Type: application/json' \
  -H 'Authorization: Bearer YOUR_CHANNEL_ACCESS_TOKEN' \
  -d '{
    "to": "GROUP_ID",
    "messages": [{
      "type": "text",
      "text": "Test message"
    }]
  }'
```

## ðŸ“š à¹€à¸­à¸à¸ªà¸²à¸£à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡

- [LINE Messaging API Documentation](https://developers.line.biz/en/docs/messaging-api/)
- [LINE Bot SDK for Node.js](https://github.com/line/line-bot-sdk-nodejs)

## âš™ï¸ à¸•à¸±à¸§à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²

à¸£à¸°à¸šà¸šà¸ªà¸™à¸±à¸šà¸ªà¸™à¸¸à¸™à¸à¸²à¸£à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡ 3 à¹à¸šà¸š (à¹€à¸¥à¸·à¸­à¸à¹à¸šà¸šà¹ƒà¸”à¹à¸šà¸šà¸«à¸™à¸¶à¹ˆà¸‡):

1. **LINE Group** (à¹à¸™à¸°à¸™à¸³): à¸ªà¹ˆà¸‡à¹€à¸‚à¹‰à¸² Group à¸ªà¸³à¸«à¸£à¸±à¸šà¸—à¸µà¸¡à¸‡à¸²à¸™
2. **Admin à¹€à¸”à¸µà¸¢à¸§**: à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸šà¸„à¸™à¹€à¸”à¸µà¸¢à¸§
3. **à¸«à¸¥à¸²à¸¢à¸„à¸™**: à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸«à¸¥à¸²à¸¢à¸„à¸™à¸žà¸£à¹‰à¸­à¸¡à¸à¸±à¸™

à¸£à¸°à¸šà¸šà¸ˆà¸°à¹€à¸¥à¸·à¸­à¸à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¸ªà¹ˆà¸‡à¸•à¸²à¸¡à¸¥à¸³à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸ªà¸³à¸„à¸±à¸: Group > à¸«à¸¥à¸²à¸¢à¸„à¸™ > à¸„à¸™à¹€à¸”à¸µà¸¢à¸§
